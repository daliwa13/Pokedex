let pokemonRepository = function () { let e = [], t = document.querySelector("#pokemonModal"); function n(t) { "object" == typeof t && "name" in t ? e.push(t) : console.log("pokemon is not correct") } function o() { return e } function i(e) { return fetch(e.detailsUrl).then(function (e) { return e.json() }).then(function (t) { e.imageUrl = t.sprites.other.dream_world.front_default, e.height = t.height, e.types = t.types, e.weight = t.weight }).catch(function (e) { console.error(e) }) } function a(e) { i(e).then(function () { var t; let n, o, i; t = e, n = $(".modal-body"), o = $(".modal-title"), i = $("<img>"), n.empty(), o.empty(), o.text(t.name.toUpperCase()), i = $("<img>").addClass("modal-img").attr("src", t.imageUrl).attr("alt", t.name), n.append(i), n.append("<br><p>Height: " + t.height + "</p>"), n.append("<p>Weight: " + t.weight + "</p>"), t.types.forEach(e => { let t = $("<button></button>"); t.addClass("type-button " + e.type.name), t.text(e.type.name.toLowerCase()), n.append(t) }), $("#pokemonModal").modal("show") }) } return window.addEventListener("keydown", e => { "Escape" === e.key && t.classList.contains("is-visible") && hideModal() }), { getAll: o, add: n, filter: function t(n) { if ("string" != typeof n) { console.error("Pokemon name must be a string!"); return } { let o = e.filter(e => e.name.toUpperCase() === n.toUpperCase()); return 0 === o.length ? console.log("No Pokemon found with the name: " + n) : console.log("Pokemon found: ", o[0]), o.length > 0 ? o[0] : void 0 } }, addListItem: function e(t) { let n = $("#pokemon-list-row"), o = $("<div></div>"), i = $("<div></div>"), r = $("<h2></h2>"); o.addClass("card", "pokemon-list-card"), i.addClass("pokemon-list-button", "card-body"), r.text(t.name[0].toUpperCase() + t.name.slice(1)), i.append(r), o.append(i), n.append(o), o.on("click", function () { a(t) }) }, loadList: function e(t) { return fetch(t).then(function (e) { return e.json() }).then(function (e) { e.results.forEach(function (e) { n({ name: e.name, detailsUrl: e.url }) }) }).catch(function (e) { console.error(e) }) }, loadDetails: i, showDetails: a } }(), pokeball = document.querySelector(".pokeball"), instructions = document.querySelector("#instructions"), apiUrl = "https://pokeapi.co/api/v2/pokemon/?limit=150"; pokeball.addEventListener("click", function () { pokeball.classList.add("disappear"), instructions.classList.add("move-away"), pokeball.addEventListener("transitionend", function () { pokeball.style.display = "none", instructions.style.display = "none", pokemonRepository.loadList(apiUrl).then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) }) }) });